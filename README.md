# Content
- About the project
- How to run the program
- Frontend-Explanation



# ABOUT THE PROJECT

## Projekt goal / Motivation
I am affiliated with a school that educates children with special needs. Each semester, our teachers are tasked with preparing comprehensive reports for each student, assessing them across various criteria adapted from the ICF Catalog (International Classification of Functioning, Disability and Health). These criteria are modified to suit our context, as we primarily cater to children diagnosed with ADHD or autism, rather than those with physical or mental disabilities.

The report-writing process is notably labor-intensive. It requires professionalism, adherence to specific criteria, and personalization for each student. Additionally, coordinating meetings among all teachers involved with a particular student to discuss these assessments can be challenging due to conflicting schedules.

To streamline this process, we aim to develop a web application that guides teachers through the assessment of each student. This tool will allow teachers to individually evaluate students and enable the lead teacher to consolidate these evaluations into a single comprehensive report.

Furthermore, for the final remarks section of the report, the application will provide functionality to send notes from all teachers to OpenAI. This will generate a preliminary draft by synthesizing all inputs into a unified text, which can then be refined by the lead teacher through a prompt-based correction tool or by rewriting as needed.

Ultimately, the completed assessments and notes will be processed through OpenAI's GPT-3.5-Turbo-Model to produce a final document that meets the school’s standards. This approach aims to reduce the administrative burden on our teachers and enhance the quality and efficiency of student assessments.

Of course, all names will be anonymized before any notes or assessments are submitted to OpenAI.


## Data Collection or Generation
To protect the privacy of our students, I have opted not to use actual personal data. Instead, I have created dummy data, which is stored in an Excel file. This format was chosen because our original student data is also maintained in Excel, ensuring compatibility and ease of use.

Using a Jupyter Notebook, the dummy data is read from the Excel file, modified as needed, and then stored across three separate collections in MongoDB. This setup mimics the structure and processing that would be involved with real data.

For demonstration purposes, the dataset includes examples of assessments and final assessments. Typically, these would be generated by the teachers. However, incorporating predefined examples facilitates the evaluation of the web application's proof of concept by external reviewers or during initial testing phases.


## Modelling
For my case I use the GPT-3.5-Turbo-Model from OpenAI. I use prompt engineering with a few-shot approach, allowing OpenAI to understand the expected format of the text. Note recommendations are generated using a single prompt paired with an example. The final text is produced using a single prompt alongside three examples. Additionally, follow-up prompts utilize the history from the initial final-text prompt, enabling OpenAI to recognize prior content and make appropriate corrections.


## Validation
Whenever a teacher opts for a text other than the one recommended by OpenAI, the cosine similarity based on the German-BERT-Model between the two texts is calculated. A high similarity score indicates that OpenAI's output closely meets the report requirements set by the teachers. Conversely, a low score suggests inadequacies in the prompts or few-shot examples used, signaling a need for adjustment. Both the initial and manually chosen texts are stored in the database, along with the similarity scores and timestamps. This data is archived for future analysis to enhance the web application's functionality.

To evaluate the effectiveness of the prompt engineering, I used historical texts and assessments, sending them anonymously to OpenAI for text generation. These generated texts (Text 2) were then compared with the original texts (Text 1). Since only a subset of the ICF-Criteria was used for this webapp, it was necessary to extract just the matching sections. The Cosine-Similarity is calculated and stored with the original-text and the openai-text in an Excel-File ("Test-Evaluation.xlsx"). I asked a teacher and two special education teacher which text they would prefer and wrote down the preferences in a seperate excel sheet ("Test-Preferences.xlsx"). They didn't know that one text is generated by OpenAI.

| **Text 1**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | **Text 2**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | **Similarity**    | Conclusion | **P1** | **P2** | **P3** |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------|------------|-----------|-----------|-----------|
| John01 ist im Unterricht meist aktiv dabei. Insbesondere bei Fächern, welche ihn interessieren. Durch die Medikation ist eine deutliche Verbesserung betreffend seiner Aufmerksamkeitsspanne und Impulsregulation erkennbar, so dass er im Unterricht gute Leistungen zeigen kann.<br>Es gelingt ihm meist, aufmerksam zu sein und den Instruktionen der Lehrperson zu folgen.<br>John01 merkt sich die meisten Schulinhalte, vergisst sie jedoch, sobald das Thema abgeschlossen wird. So kann das Wissen später kaum abgerufen werden. Man merkt zwar, dass er gute Leistungen erbringen möchte, er ist aber noch nicht bereit, für diese auch Aufwand zu betreiben.                                            | John01 zeigt eine gute Fähigkeit, aktiv am Unterricht teilzunehmen. Durch die Medikation ist eine deutliche Verbesserung seiner Aufmerksamkeitsspanne und Impulsregulation erkennbar. <br>Zudem zeigt er gute Leistungen im Unterricht und kann währenddessen aufmerksam sein sowie den Instruktionen der Lehrperson folgen. <br>Allerdings hat John01 teilweise Schwierigkeiten, sich schulische Inhalte zu merken. Es ist erkennbar, dass er zwar gute Leistungen erbringen möchte, jedoch möglichst wenig Aufwand dafür betreiben möchte. Auch kann er schulische Inhalte nur teilweise bei Bedarf abrufen.                                                                                          | 0.979850274522838 | **Text 1** | Text 1 | Text 1 | Text 2 |
| John02 ist im Unterricht meist aktiv dabei. Insbesondere bei Fächern, welche ihn interessieren. Er zeigt generell gute Leistungen im Unterricht. <br>Es gelingt ihm meist, aufmerksam zu sein und den Instruktionen der Lehrperson zu folgen. <br>John02 merkt sich die meisten Schulinhalte, vergisst sie jedoch, sobald das Thema abgeschlossen wird. So kann das Wissen später kaum abgerufen werden.                                                                                                                                                                                                                                                                                                          | John02 zeigt eine gute Fähigkeit, aktiv am Unterricht teilzunnehmen und Leistungen zu erbringen. <br>Er ist während des Unterrichts aufmerksam und kann den Instruktionen der Lehrperson gut folgen. <br>Zudem merkt er sich schulische Inhalte gut und kann sie bei Bedarf erfolgreich abrufen.                                                                                                                                                                                                                                                                                                                                                                                                        | 0.963411048543825 | **Text 1** | Text 1 | Text 1 | Text 2 |
| John03 ist im Unterricht meist aktiv dabei. Insbesondere bei Fächern, welche ihn interessieren. <br>John03 kommt meist gut gelaunt und sehr pünktlich in die Schule. In der Klasse hat er seinen Platz gefunden. <br>Seit Beginn der Oberstufe hat er grosse Fortschritte in Bezug auf sein Lernverhalten erzielt. Er ist bemüht, Leistungen zu zeigen und verweigert die Mitarbeit kaum mehr. Es gelingt ihm meist, aufmerksam zu sein und den Instruktionen der Lehrperson zu folgen. <br>John03 hat manchmal Schwierigkeiten, sich Schulinhalte zu merken. Wenn er sich jedoch für ein Thema interessiert, kann er dieses aufnehmen und später wieder abrufen.                                                 | John03 zeigt eine gute Fähigkeit, aktiv am Unterricht teilzunehmen und Leistungen zu erbringen. Er erscheint meist gut gelaunt und sehr pünktlich in der Schule, hat seinen Platz in der Klasse gefunden und hat seit Beginn der Oberstufe grosse Fortschritte in Bezug auf sein Lernverhalten gemacht. <br>Während des Unterrichts kann er gut aufmerksam sein und den Instruktionen der Lehrperson folgen. <br>Allerdings hat John03 gelegentlich Schwierigkeiten, sich schulische Inhalte zu merken und kann diese nicht immer bei Bedarf abrufen. Wenn ihn ein Thema interessiert, ist er jedoch in der Lage, dieses aufzunehmen und später wieder abzurufen.                                       | 0.98897207370802 | **Text 2** | Text 2 | Text 2 | Text 1 |
| John04 ist im Unterricht meist aktiv dabei. Insbesondere bei Fächern, welche ihn interessieren. <br>Er zeigt generell gute Leistungen. Es gelingt ihm, aufmerksam zu sein und den Instruktionen der Lehrperson zu folgen. <br>John04 merkt sich die meisten Schulinhalte und er kann diese bei Bedarf abzurufen.                                                                                                                                                                                                                                                                                                                                                                                                  | John04 zeigt eine gute Fähigkeit, aktiv am Unterricht teilzunehmen und Leistungen zu erbringen.<br>Zudem zeichnet er sich durch eine sehr gute Aufmerksamkeit während des Unterrichts aus und folgt den Instruktionen der Lehrperson gut.<br>Er kann schulische Inhalte gut behalten und bei Bedarf erfolgreich abrufen.                                                                                                                                                                                                                                                                                                                                                                                | 0.953945546215696 | **Text 1** | Text 2 | Text 1 | Text 1 |
| John05 hat noch Schwierigkeiten, im Unterricht aktiv mitzumachen. Bei Fächern, welche ihn interessieren, gelingt es ihm aber mittlerweile besser. <br>In einer Klassengemeinschaft, die ihm vertraut ist, beteiligt er sich wesentlich häufiger im Plenumsunterricht. <br>Es gelingt ihm, aufmerksam zu sein und den Instruktionen der Lehrperson zu folgen. Man merkt allerdings, dass ihm manchmal die Aufträge nicht sofort klar sind, sodass er nochmals separat eine Einführung benötigt. <br>John05 merkt sich aber die meisten Schulinhalte und es gelingt ihm, diese bei Bedarf abzurufen.                                                                                                                | John05 kann nicht immer aktiv am Unterricht teilnehmen. In einer Klassengemeinschaft, die ihm vertraut ist, beteiligt er sich wesentlich häufiger als im Plenumsunterricht. Er kann auch nicht immer im Unterricht Leistung zeigen, jedoch ist eine Verbesserung in Fächern, die ihn interessieren, erkennbar. <br>Sehr gut gelingt es John05, während dem Unterricht aufmerksam zu sein und den Instruktionen der Lehrperson zu folgen. Es fällt jedoch auf, dass ihm manchmal die Aufträge nicht sofort klar sind, weshalb er zusätzliche Erklärungen benötigt. <br>Zudem kann er sich schulische Inhalte gut merken und diese bei Bedarf auch gut abrufen.                                           | 0.982328822419354 | **Text 1** | Text 1 | Text 2 | Text 1 |
| John06 hat noch Schwierigkeiten, im Unterricht aktiv mitzumachen. Selbst bei Fächern, welche ihn interessieren, fällt es ihm noch schwer. Dies ist vor allem auf seine momentan schwierige Situation mit seiner Gesundheit zurückzuführen. <br>Eine hohe Belastung zeigt sich ebenfalls durch viele Abklärungen seitens der Behörden. <br>John06 ist sehr verunsichert und niedergeschlagen. Daher gelingt ihm häufig nicht, aufmerksam zu sein und den Instruktionen der Lehrperson zu folgen. Es sind aber bereits Fortschritte erkennbar. <br>John06 hat noch Schwierigkeiten, sich Schulinhalte zu merken und diese bei Bedarf abzurufen. Es fehlt ihm an Energie und Kraft, sich auf die Schule einzulassen. | John06 kann aufgrund seiner momentan schwierigen gesundheitlichen Situation noch nicht aktiv am Unterricht teilnehmen. Diese Situation wird durch eine hohe Belastung aufgrund vieler Abklärungen seitens Behörden verstärkt, was dazu führt, dass er sehr verunsichert und niedergeschlagen wirkt. <br>Zudem zeigt er noch keine Leistungen im Unterricht. <br>Es ist jedoch zu erkennen, dass John06 Fortschritte macht, indem er teilweise während des Unterrichts aufmerksam ist und den Instruktionen der Lehrperson folgen kann. Trotzdem fehlt es ihm an Energie und Kraft, um schulische Inhalte zu merken und bei Bedarf abzurufen.                                                            | 0.983526984909484 | **Text 2** | Text 2 | Text 2 | Text 2 |
| John07 hat noch Schwierigkeiten, im Unterricht aktiv mitzumachen und Leistungen zu zeigen. Bei Fächern, welche ihn interessieren, gelingt es ihm aber mittlerweile besser. <br>Er kann auch noch nicht immer, aufmerksam zu sein und den Instruktionen der Lehrperson zu folgen. Es sind aber bereits Fortschritte erkennbar. <br>John07 merkt sich die meisten Schulinhalte und es gelingt ihm, diese bei Bedarf abzurufen.                                                                                                                                                                                                                                                                                      | John07 kann nicht immer aktiv am Unterricht teilnehmen und zeigt nicht immer Leistung.<br>Er ist jedoch teilweise während des Unterrichts aufmerksam und kann den Instruktionen der Lehrperson folgen, wobei Fortschritte erkennbar sind.<br>John07 kann sich gut schulische Inhalte merken, lernt jedoch selten von sich aus für Prüfungen und weigert sich teilweise, Prüfungsdaten einzutragen.<br>Daher ist der Austausch mit den Eltern wichtig, um John an Prüfungen zu erinnern und ihn zum Lernen zu motivieren.<br>Es gelingt John07 jedoch noch nicht, eigenverantwortlich sein Lernen zu organisieren.<br>Er kann schulische Inhalte gut bei Bedarf abrufen.                                 | 0.971370812328238  | **Text 2** | Text 2 | Text 1 | Text 2 |
| John08 ist im Unterricht oftmals sehr bemüht, aktiv mitzumachen und Leistungen zu zeigen. Es gelingt ihm meist, aufmerksam zu sein und den Instruktionen der Lehrperson zu folgen. <br>John08 merkt sich die meisten Schulinhalte, vergisst sie jedoch, sobald das Thema abgeschlossen wird. So kann das Wissen später kaum abgerufen werden.                                                                                                                                                                                                                                                                                                                                                                     | John08 kann teilweise aktiv am Unterricht teilnehmen. Er zeigt sich sehr bemüht, Leistungen im Unterricht zu erbringen. <br>Während des Unterrichts kann er gut aufmerksam sein und den Instruktionen der Lehrperson folgen. <br>Zwar kann er schulische Inhalte gut merken, jedoch vergisst er diese wieder, sobald das Thema vorbei ist. <br>John08 hat Schwierigkeiten, schulische Inhalte bei Bedarf abzurufen, da er das Wissen nach Prüfungen nicht mehr abrufen kann. Dies wurde insbesondere im Stellwerk-Test deutlich.                                                                                                                                                                        | 0.974461125004387 | **Text 2** | Text 2 | Text 1 | Text 2 |
| John09 ist im Unterricht meist aktiv dabei. Insbesondere bei Fächern, welche ihn interessieren zeigt er gute Leistungen. Es gelingt ihm meist, aufmerksam zu sein und den Instruktionen der Lehrperson zu folgen. <br>Themen die John09 interessieren kann er sich sehr gut merken. Das Abrufen von Wissen bei Prüfungen gelingt ihm ebenfalls gut.                                                                                                                                                                                                                                                                                                                                                               | John09 zeigt eine gute Fähigkeit, aktiv am Unterricht teilzunehmen und Leistungen zu erbringen. Er ist während des Unterrichts aufmerksam und kann den Instruktionen der Lehrperson gut folgen. <br>Besonders bei Themen, die sein Interesse wecken, kann er sich schulische Inhalte sehr gut merken. Zudem gelingt es ihm gut, schulische Inhalte bei Bedarf abzurufen.                                                                                                                                                                                                                                                                                                                                | 0.973463255093094 | **Text 2** | Text 2 | Text 2 | Text 2 |
| John10 ist im Unterricht oftmals sehr bemüht, aktiv mitzumachen. Es kommt regelmässig vor, dass er sich durch unangenehme Situationen in seinem Privatleben oder durch soziale Konflikte nicht auf den Unterrichtsstoff einlassen kann. <br>Es gelingt ihm auch noch nicht immer, aufmerksam zu sein und den Instruktionen der Lehrperson zu folgen. Es sind aber deutliche Fortschritte erkennbar. <br>John10 kann sich Schulinhalte immer besser merken und sie bei Bedarf abrufen.                                                                                                                                                                                                                             | John10 kann teilweise aktiv am Unterricht teilnehmen und zeigt dabei oft grossen Einsatz.<br>Es kommt regelmässig vor, dass er sich durch unangenehme Situationen in seinem Privatleben oder soziale Konflikte nicht auf den Unterrichtsstoff einlassen kann, wodurch er nur teilweise Leistungen im Unterricht zeigen kann.<br>Obwohl er noch nicht immer während des Unterrichts aufmerksam sein kann und den Instruktionen der Lehrperson folgt, sind deutliche Fortschritte erkennbar.<br>John10 kann gut schulische Inhalte merken, wobei es immer besser wird.<br>Auch beim Abrufen von schulischen Inhalten zeigt er gute Fähigkeiten, wobei hier ebenfalls noch Verbesserungspotenzial besteht. | 0.979527809239108 | **Text 1** | Text 1 | Text 2 | Text 1 |


## Interpretation
- The similarity between both texts is quite high, and in most cases, the three individuals did not share the same opinion about which text was better. All individuals noted some mistakes in the texts; even though they preferred Text 2 (OpenAI), they mentioned that they would correct the mistakes first, but still thought that the text was better than the original.

- Overall, it is possible to say that the prompt works quite well. Perhaps the mistakes are due to the German language, which might be more challenging for the OpenAI model than English. In another iteration, the prompt could be tested with the GPT-4 model instead of the older GPT-3.5 Turbo.

- It is notable that even though the texts are quite different, they share the same title and some relation to school information. The cosine similarity, measured by the German-BERT model, is quite high. This may be because BERT is very effective at understanding context. Perhaps in another iteration, fine-tuning BERT or combining it with models that also analyze input volume could show an improvement in achieving more accurate text similarity.




# RUN THE PROGRAM

## Prequisit
- pyenv 2.3.36
- python 3.12.1
- juypter notebook 7.0.2
- node.js 21.3.0

## Language
- Information is in English
- Program is in German, since the Use-Case is for a Swiss School

## 1. Get the Project
- Open Visual Studio Code
- Open a Directory
- Open a Terminal and write "git clone git@github.com:danielakomenda/ML2-ExamProject.git"
- Open the cloned folder

## 2. Create Python-Environment
- CTRL+Shift+p -> Create Environment
- Choose .venv
- Choose Python 3.12.1 (or similar)
- Install Libraries: pip install -r requirements.txt


## 3. Get Access to DB nd API
- Create a File with the name .env on the toplevel of the project (same folder as requirements.txt) with the following:
    - MONGODB_URI=<your own mongodb-uri> <-- if you don't have one, you can create one for free
    - OPENAI_APIKEY=<openai-api-key> <-- if you don't have one, contact me


## 4. Create Dummy-Data
- Kernel: Python 3.11 or higher
- Run Jupyter Notebook "Dummy-Data-Input"
- Check your MongoDB, if you can find 3 collections and data in each collection


## 5. Run Backend-Server
- Go to directory: cd backend
- Start backend-server: litestar run
- Start backend-server in debug-mode: litestar run -rd


## 6. Run Frontend
- Open a second terminal
- Go to directory: cd frontend
- Install dependencies: npm install
- Start frontend: npm run dev


## 7. Happy-Path
- Open a browser and type: http://localhost:8081/ or http://127.0.0.1/8081 (it should be the port that the frontend provides you)
- Go to "Beurteilen"
- Choose Student "Natasha Romanoff"
- Choose Semester "HS23"
- Write an Assessment, notes are not required but nice to have.
- Click "Bestätigen"
- Click "OK" -> you will be directed to the page "Zusammenführen" for Natasha and HS23
- Click "OK"
- Choose the "Bewertung" you find most suitable
- Change at least one note
- Click "Abschliessen"
    - -> You can see an Overview of the final assessment
    - -> You can see the similarity of your modified note and the recommended note from OpenAI
- Click "OK" -> you will be directed to the page "Finaler Text" for Natasha for HS23
- Click "Text generieren"
- After the text is generated click "Korrigieren"
- Write a propmpt (e.g. Bitte füge bei den Sprachen noch Französisch hinzu)
- Click "Send"
- Click "Eigener Text"
- You can write your own text (e.g. Test Text)
- Click "Send"
    - -> You will see the similarity between your text and the first text from OpenAI
    - -> Your text will be stored in the Database
    - -> The similarity will be stored in a new Collection in MongoDB
- Click "OK"


## 8. Experiment
- You can try out different Use-Cases


# Front-End-Explanation

## Home
Here you find the project-goal and motivation behind the project

## Beurteilen
Here you can choose a student and a semester.
You create an assessment for the student by different criteria.
If you want, you can write down some notes as well.
Per student and semester you can create several assessments.
This is important, so many different teachers can assess the student individually.
All the assessment are stored in a seperate collection in the Database.

## Zusammenführen
Here you can choose a student and a semester.
You can see all the assessment that have been done for a given student and semester.
You can decide how you would like to create the final assessment.
The notes of the different teachers are combined to a note-suggestion, but you are free to create another note-entry.
If you write your own note the Cosine-Similarity will be calculated between the openAI-recommended-note and your own one.
The final-assessment will be stored with the rest of the semester-data to the Database

## Finaler Text
Here you can choose a student and all the semesters with a final assessment.
You can see an overview of the final assessment.
You have the possibility to correct something, if you are not yet happy.
If the final-assessment is ok, you can create a text.
The text is created with the openai-API.
I used prompt engineering with a few shot dataset.
All entries are anonymized, so there will be no name sent to openai.
The text will be displayed in the frontend with the name.
If you are not yet happy with the text, you can write your own prompt to give openai specific information, how you would like to change the text. (TODO)
You can also write your own text.
If you write your own text the Cosine-Similarity will be calculated between the openAI-recommended-text and your own one.
If you are happy with the text, it will be stored in the Database with the rest of the semester-data.

## Additional Pages
- Student: If you'd like to create your own student, you can use '/base-data'-URL.
- Semester: If you'd like to create your own semester, you can use '/semester-data'-URL.
